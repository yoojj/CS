# EC2
Amazon Elastic Compute Cloud     
: 가상화 기반 컴퓨팅 리소스를 제공하는 서비스       
: CPU, 메모리, 스토리지, 네트워킹 등 다양한 컴퓨팅 리소스 제공   
: 오토스케일 기능으로 인스턴스를 확장하거나 축소    
: 사용하는 인스턴스 타입과 리전, AMI에 따라 비용이 달라짐   


- [인스턴스](#인스턴스)
    - VPC
    - 스토리지
        - 인스턴스 스토어 볼륨
        - EBS
    - 보안 그룹
    - 로드밸런싱
    - 오토스케일
- [AMI](#ami)
- [요금](#요금)


```bash
0. 리전 확인 후 인스턴스 생성  
1. Amazon Machine Image(AMI) 선택
2. 인스턴스 타입 선택
3. 인스턴스 구성 설정
    - VPC
4. 스토리지 설정
    - 인스턴스 스토어 볼륨
    - EBS
5. 서비스 구분을 위해 태그 지정
6. 보안 그룹 설정
7. 인스턴스 생성
8. 키 페어 다운


# 인스턴스 접속
## 키 페어 파일 권한 수정
$ chmod 600 키.pem

## 접속
$ ssh -i 키.pem 주소
```


**SSH 접속 프로그램**  
- Chrome Secure Shell App -- window, linux, Mac
- Hyper -- window, linux, Mac
- MobaXterm -- window



## 인스턴스
: 생성된 가상 서버 지칭     
: 컴퓨팅 리소스 스펙에 따라 인스턴스 타입으로 분류     


인스턴스 타입 | 모델 | 설명
---|---|---
범용 | A1, T3, T3a, T2, M5, M5a, M4 | 균형있는 컴퓨팅 리소스 제공, 웹서버, 소규모 데이터베이스 등에 적합
컴퓨팅 최적화 | C5, C5n, C4 | 고성능 프로세서를 지원하여 고성능이 필요한 서비스에 적합  
메모리 최적화 | R5, R5a, R4, X1e, X1 | 메모리를 많이 사용하는 서비스에 적합  
가속화된 컴퓨팅 | P3, P2, G3, F1 | 부동 소수점 계산, 그래픽 처리 등에 적합  
스토리지 최적화 | I3, D2, H1 | 큰 스토리지 용량 제공하여 데이터베이스 처리에 적합  



### 인스턴스 구분

> 인스턴스 패밀리 + 인스턴스 세대 + 인스턴스 사이즈

```
ex.
t2.nano
m5.large

인스턴스 세대가 높을 수록 최신
인스턴스 사이즈가 클수록 용량과 가격이 2배씩 증가
```



### 인스턴스 상태

![instance lifecycle](
https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/images/instance_lifecycle.png)

```
pending -- 인스턴스 생성중
running -- 인스턴스 가동

rebooting -> running -- 인스턴스 재가동

stopping  -> stopped -- 인스턴스 중지 (가동 가능)
stopped -> pending -> running -- 인스턴스 중지 후 가동

shutting-down -> terminated  -- 인스턴스 영구 삭제 (가동 불가)


인스턴스 재가동은 동일한 호스트 머신을 사용하여 IP 주소가 동일하나
인스턴스 중지 후 가동은 새로운 호스트 머신을 사용하여 IP 주소가 새로 할당 됨
(새 호스트 머신을 사용하므로 인스턴스 스토어 볼륨에 있는 데이터 손실)
```



## AMI
Amazon Machine Image  
: 인스턴스 생성을 위한 소프트웨어 구성을 제공하는 템플릿 이미지  
: OS뿐만 아니라 DB, SDK, 도구 등 필요한 소프트웨어들로 구성   
: HVM, PV에 따라 선택할 수 있는 타입 제한


**HVM**   
Hardware Virtual Machine    
: 완전 가상화


**PV**  
Para Virtualization  
: 반 가상화



### AMI 생성



## 요금
요금 구분 | 설명
---|---
온디맨드      | 공유와 전용으로 나뉘며, 인스턴스를 초 단위 기준으로 사용한 만큼 지불  
예약 인스턴스  | 공유와 전용으로 나뉘며, 정액제 방식으로 1년이나 3년 기간 동안 예약하고 비용은 선결제
스팟 인스턴스  | 경매형 방식으로 여분의 컴퓨팅 리소스 입찰

! 인스턴스가 항상 켜져있다면 예약 인스턴스  
! 짧은 시간 컴퓨팅 리소스가 필요하다면 스팟 인스턴스  



[top](#)
